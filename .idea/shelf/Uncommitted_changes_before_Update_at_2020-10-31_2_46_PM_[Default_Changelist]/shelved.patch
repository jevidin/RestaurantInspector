Index: app/src/main/java/ca/cmpt276/project/ui/RestaurantDetails.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ca.cmpt276.project.ui;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport java.text.DateFormat;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Collections;\r\nimport java.util.Comparator;\r\nimport java.util.Date;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport ca.cmpt276.project.R;\r\nimport ca.cmpt276.project.model.Inspection;\r\nimport ca.cmpt276.project.model.InspectionListManager;\r\nimport ca.cmpt276.project.model.Restaurant;\r\nimport ca.cmpt276.project.model.RestaurantListManager;\r\n\r\nimport static java.lang.Math.abs;\r\n\r\npublic class RestaurantDetails extends AppCompatActivity {\r\n\r\n    private static String INDEX = \"0\";\r\n    RestaurantListManager restaurantManager;\r\n    InspectionListManager inspectionManager;\r\n    static Restaurant rest;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_restaurant_details);\r\n\r\n        restaurantManager = RestaurantListManager.getInstance();\r\n        Getdata();\r\n        populateList();\r\n        setValues();\r\n        OnClick();\r\n    }\r\n\r\n    private void populateList() {\r\n        Collections.sort(inspectionManager.getInspections(), new Comparator<Inspection>() {\r\n            DateFormat format = new SimpleDateFormat(\"yyyyMMdd\");\r\n            @Override\r\n            public int compare(Inspection o1, Inspection o2) {\r\n                return (int) Math.max(o1.getDate().getTime(),o2.getDate().getTime());\r\n            }\r\n        });\r\n        ArrayAdapter<Inspection> adapter = new InspectionListAdapter();\r\n        ListView list = findViewById(R.id.list_insp);\r\n        list.setAdapter(adapter);\r\n    }\r\n\r\n    private class InspectionListAdapter extends ArrayAdapter<Inspection>{\r\n        public InspectionListAdapter(){\r\n            super(RestaurantDetails.this,R.layout.inspection_list,inspectionManager.getInspections());\r\n        }\r\n        \r\n        @Override\r\n        public View getView(int position, View convertView, ViewGroup parent) {\r\n            View iv = convertView;\r\n            if(iv == null){\r\n                iv = getLayoutInflater().inflate(R.layout.inspection_list, parent, false);\r\n            }\r\n            InspectionListManager insplist = rest.getInspections();\r\n            Inspection insp = insplist.getInspection(position);\r\n\r\n            ImageView hazard_img = iv.findViewById(R.id.img_hazard);\r\n            TextView hazard_txt = iv.findViewById(R.id.txt_hazard);\r\n            TextView critissues_txt = iv.findViewById(R.id.txt_critIssues);\r\n            TextView Ncritissues_txt = iv.findViewById(R.id.txt_NcritIssues);\r\n            TextView inspDate_txt = iv.findViewById(R.id.txt_inspDate);\r\n            //setting stuff\r\n            if(insplist.getInspections().size()>0) {\r\n                critissues_txt.setText(\"# of Critical Issues: \" + insp.getCritical());\r\n                Ncritissues_txt.setText(\"# of Non-Critical Issues: \" + insp.getNonCritical());\r\n\r\n                switch (insp.getLevel()) {\r\n                    case LOW:\r\n                        hazard_txt.setText(R.string.hazard_low);\r\n                        hazard_txt.setTextColor(Color.parseColor(\"#45DE08\")); // Green\r\n                        hazard_img.setBackgroundResource(R.drawable.green_hazard);\r\n                        break;\r\n                    case MODERATE:\r\n                        hazard_txt.setText(R.string.hazard_moderate);\r\n                        hazard_txt.setTextColor(Color.parseColor(\"#FA9009\")); // Orange\r\n                        hazard_img.setBackgroundResource(R.drawable.orange_hazard);\r\n                        break;\r\n                    case HIGH:\r\n                        hazard_txt.setText(R.string.hazard_high);\r\n                        hazard_txt.setTextColor(Color.parseColor(\"#FA2828\")); // Red\r\n                        hazard_img.setBackgroundResource(R.drawable.red_hazard);\r\n                        break;\r\n                }\r\n                Date currentDate = new Date();\r\n                SimpleDateFormat formatter1 = new SimpleDateFormat(\"MMM yyyy\");\r\n                long diffInMillies = abs(currentDate.getTime() - insp.getDate().getTime());\r\n                long diff = TimeUnit.DAYS.convert(diffInMillies, TimeUnit.MILLISECONDS);\r\n                String inspectionDateText;\r\n                if (diff > 365) {\r\n                    inspectionDateText = formatter1.format(insp.getDate());\r\n                } else if (diff > 30) {\r\n                    formatter1 = new SimpleDateFormat(\"MMM dd\");\r\n                    inspectionDateText = formatter1.format(insp.getDate());\r\n                } else {\r\n                    inspectionDateText = diff + \" days ago\";\r\n                }\r\n                inspDate_txt.setText(inspectionDateText);\r\n            }\r\n            else {\r\n                critissues_txt.setText(R.string.no_inspection_found);\r\n                Ncritissues_txt.setText(R.string.no_inspection_found);\r\n                inspDate_txt.setText(R.string.no_inspection_found);\r\n            }\r\n            return iv;\r\n        }\r\n    }\r\n\r\n    private void setValues() {\r\n        TextView ResName_txt = findViewById(R.id.txt_restname);\r\n        ResName_txt.setText(rest.getName());\r\n        TextView ResAdd_txt = findViewById(R.id.txt_restAdd);\r\n        ResAdd_txt.setText(\"Facility Location: \\n\"+rest.getAddress());\r\n        TextView ResGps_txt = findViewById(R.id.txt_gps);\r\n        ResGps_txt.setText(rest.getGPS());\r\n    }\r\n\r\n    private void OnClick() {\r\n        ListView insp_list = findViewById(R.id.list_insp);\r\n        insp_list.setOnItemClickListener(((parent, view, position, id) -> {\r\n            Toast.makeText(RestaurantDetails.this, \"Open Inspection details activity for position: \" + position, Toast.LENGTH_SHORT).show();\r\n        }));\r\n    }\r\n\r\n    private void Getdata() {\r\n        Intent intent = getIntent();\r\n        int rest_index = intent.getIntExtra(INDEX,0);\r\n        rest = restaurantManager.getRestaurant(rest_index);\r\n        inspectionManager = rest.getInspections();\r\n    }\r\n\r\n    public static Intent makeLaunchIntent(RestaurantListActivity restaurantListActivity, int position) {\r\n        Intent intent = new Intent(restaurantListActivity, RestaurantDetails.class);\r\n        intent.putExtra(INDEX, position);\r\n        return intent;\r\n    }\r\n}\r\n//https://www.geeksforgeeks.org/collections-sort-java-examples/\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/ca/cmpt276/project/ui/RestaurantDetails.java	(revision fea5736452262f10114b5f95f460b8230aae9731)
+++ app/src/main/java/ca/cmpt276/project/ui/RestaurantDetails.java	(date 1604180684020)
@@ -53,7 +53,7 @@
             DateFormat format = new SimpleDateFormat("yyyyMMdd");
             @Override
             public int compare(Inspection o1, Inspection o2) {
-                return (int) Math.max(o1.getDate().getTime(),o2.getDate().getTime());
+                return (int)o1.getDate().getTime() - (int)o2.getDate().getTime();
             }
         });
         ArrayAdapter<Inspection> adapter = new InspectionListAdapter();
